<!DOCTYPE html>
<html lang="en">

<head>
	<script src="js/script.js"></script>
	<script src="js/jquery-1.10.2.min.js"></script>
	<link type="text/css" rel="stylesheet" href="stylesheet.css"/>
	<title>Give Me A Vagrant - Local VMs on demand</title>
	<!--
	<base href="C:/Users/jennysa/Documents/">
	Use later to make relative links for ../give-me-a-deploy/index.html etc.-->
	<!-- YUI seed file
	<script src="http://yui.yahooapis.com/3.14.0/build/yui/yui-min.js"></script> -->
</head>

<body>
	
	<div class="index-page-wrap">
		
		<img id="Logo" src = "oh_logo.png" alt="Logo" name="top"/>
		
		<br><br>
		
		<h1><div class="orange">Instant VMs</div> at your fingertips</h1>

		<h2>Provide us with some details and we'll give you a <div class="teal">Vagrantfile</div> which you can use to boot up your <div class="teal">customised local VM</div>.</h2>
		<br>

		<form name="vmdetails" id="vmdetails" onsubmit="">
			<table title="VM Details Form" class="form">
				<tr>
					<td class="table-header" colspan="2">
						Please fill in the following details.<br>
						<h6>* Required fields</h6><br>
					</td>
				</tr>
				<tr>
					<td class="label">Email*</td>	<!--the label class will have text aligning left-->
					<td class="input-field">
						<input type="text" name="email" id="Email" autocapitalize="off" value="@orionhealth.com" title="Email" required>
					</td>
				</tr>
				<tr>
					<td class="label">VM Name*</td>
					<td class="input-field">
						<input type="text" name="vmname" id="VMName" autocapitalize="off" value="e.g. puppet-master" title="VM Name" required>
					</td>
				</tr>
				<tr>
					<td class="label">Operating System*</td>
					<td class="input-field">
						<select required>
						  <option value="ubuntu">Ubuntu</option>
						  <option value="centos">Centos</option>
						</select>
					</td>
				</tr>
				<tr>
					<td class="label">Products</td>
					<td class="checkbox-field">
						<input type="checkbox" name="products" value="portalbeta"> Portal Beta<br>
						<input type="checkbox" name="products" value="portal8.3"> Portal 8.3<br>
						<input type="checkbox" name="products" value="portal8.2"> Portal 8.2<br>
						<input type="checkbox" name="products" value="portal8.1"> Portal 8.1<br>
						<input type="checkbox" name="products" value="cdrportal"> CDR Portal<br>
					</td>
				</tr>
				<tr>
					<td class="label">Puppet Scripts</td>
					<td class="input-field">
						<input type="text" id="VMName" autocapitalize="off" value="Point us at your Puppet scripts in SVN and we'll provision the VM." title="Puppet Scripts">
					</td>
				</tr>
				<!-- 
				<tr>
					<td class="label">Extend life of VM</td>
					<td>
						<h6>Coming soon</h6>
					</td>
				</tr>
				-->
				<tr>
					<td colspan="2" class="table-footer">
						<br>
						
						<input type="submit" class="button" id="down" value="Generate Source Code">
						
						<input type="reset" formaction="URL" class="button">

						<br>
					</td>
				</tr>
			</table>
		</form>
	</div>











	<span id="slide">


		<a name="source-code"><br></a>

		<h1>Your provisioned <div class="orange">Vagrantfile</div> is ready</h1>

		<h2>Simply <div class="teal">save</div> the following source code and run the command <div class="teal">vagrant up</div>.</h2>

		<input type="button" onClick="clipboard();" class="button" value="Copy to clipboard"></input>
		 
		<input type="button" onClick="clipboard();" class="button" value="Download Vagrantfile" title="Save to a local directory"></input>

		<input type="button" class="button" id="up" value="Start Over"></input>
					
		<br><br>

<div class="source"><xmp># -*- mode: ruby -*-
# vi: set ft=ruby :

# Vagrantfile API/syntax version. Don't touch unless you know what you're doing!
VAGRANTFILE_API_VERSION = "2"

PORT_NUMBER_GUEST = 19080
PORT_NUMBER_HOST = 19080

Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|

  # Allocate the VM more memory
  config.vm.provider :virtualbox do |vb|
    vb.customize ["modifyvm", :id, "--memory", "1536"]
  end
 
  # Every Vagrant virtual environment requires a box to build off of.
  config.vm.box = "centos-64-x64-vbox4210-nocm"

  # The url from where the 'config.vm.box' box will be fetched if it
  # doesn't already exist on the user's system.
  config.vm.box_url = "http://puppet-vagrant-boxes.puppetlabs.com/centos-64-x64-vbox4210-nocm.box"

  # Create a forwarded port mapping which allows access to a specific port
  # within the machine from a port on the host machine.
  config.vm.network :forwarded_port, guest: PORT_NUMBER_GUEST, host: PORT_NUMBER_HOST

  # Install Puppet
  config.vm.provision :shell, path: "install_puppet.sh"

  config.vm.provision :puppet do |puppet|
    #puppet.options = "--verbose --debug"
    puppet.module_path  = "modules/puppet-ohp"
    puppet.manifests_path = "manifests"
    puppet.manifest_file  = "site.pp"
  
  end

  # Check that it's worked within vagrant
  config.vm.provision :shell, path: "check_install.sh"

end</xmp></div>

	</span>

	<br><br>

		<div class="footer">
		<a href="index.html" title="Give-Me-A-Vagrant Home">Home</a> | <a href="docs.html" title="Documentation, FAQs & Help">Docs</a> | <a href="about.html" title="About the Give-Me-A-Vagrant Project">About</a> | <a href="http://woki/display/IntDev/Continuous+Delivery" title="Orion Continuous Delivery" target="_blank">OCD</a> | <a href="#top" title="Back to Top">Top</a>
		</div>

	<br><br><br><br>

</body>
</html>